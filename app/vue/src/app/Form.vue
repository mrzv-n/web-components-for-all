<script setup lang="ts">
import { ref, reactive } from 'vue';

defineProps<{
  title: string;
}>();

const title = ref('vue');

const form = reactive({
  birthDay: 'sss',
  fullName: '',
  phoneNumber: '',
  state: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',
});

const options = ref(['–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', '–ú–æ—Å–∫–≤–∞', '–í–æ—Ä–æ–Ω–µ–∂']);

function onInput(e: Event, fieldName: string) {
  form[fieldName] = (e.target as HTMLInputElement).value;
}

function onSelect(e: CustomEvent, fieldName: string) {
  form[fieldName] = e.detail.value;
}
</script>

<template>
  <div class="wrapper">
    <div class="container">
      <div id="welcome">
        <h1>
          <span>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –¥–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</span>
          –Ø –¥–µ–º–∫–∞ {{ title }} üëã
        </h1>
      </div>

      <br />

      <base-form>
        <base-input
          :value="form.birthDay"
          label="–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è"
          :error="!form.birthDay ? '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è' : ''"
          @input="(e: Event) => onInput(e, 'birthDay')"
        ></base-input>

        <base-input
          :value="form.fullName"
          label="–§–∞–º–∏–ª–∏—è –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ"
          :error="!form.fullName ? '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –§–ò–û' : ''"
          @input="(e: Event) => onInput(e, 'fullName')"
        ></base-input>

        <base-input
          :value="form.phoneNumber"
          label="–¢–µ–ª–µ—Ñ–æ–Ω"
          :error="!form.phoneNumber ? '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω' : ''"
          @input="(e: Event) => onInput(e, 'phoneNumber')"
        ></base-input>

        <base-selector
          label="–ì–æ—Ä–æ–¥"
          :options="options"
          :value="form.state"
          :error="!form.state ? '–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥' : ''"
          @select-item="(e: CustomEvent) => onSelect(e, 'state')"
        ></base-selector>
      </base-form>
    </div>
  </div>
</template>

<style scoped></style>
